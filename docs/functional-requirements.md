# Функциональные требования
## Общее
0. Отсутствуют ФТ про статистику!
   
I. Для удобства восприятия и документирования система разделена на контексты. Контекст - набор функциональных требований, доступных пользователю в данный момент. Пользователь всегда находится в ровно одном контексте.

II. Если не сказано иного, после завершения функционального сценария, пользователь остаётся в том же контексте, из которого начал функциональный сценарий.

III. Из любого контекста пользователь может вернуться в предыдущий контекст, вплоть до стартового.

IV. Из любого контекста пользователь может выйти из системы.

## Авторизация
1. Я, как гость, в гостевом контексте регистрируюсь в системе, вводя логин, имя и пароль. После чего становлюсь соответствующим участником и перехожу в стартовый контекст.
2. Я, как гость, в гостевом контексте аутентифицируюсь в системе, вводя логин и пароль, соответствующие тем, по которым я ранее зарегистрировался. После чего становлюсь соответствующим участником и перехожу в стартовый контекст.

## Аккаунт
3. Я, как участник, в любом контексте выхожу из аккаунта. После чего становлюсь гостем и перехожу в гостевой контекст.
4. Я, как участник, в стартовом контексте перехожу в контекст управления аккаунтом.
5. Я, как участник, в контексте управления аккаунтом изменяю своё имя.
6. Я, как участник, в контексте управления аккаунтом изменяю свой пароль, введя старый и новый пароли.

## Встраиваемое
7. Я, как участник, в том контексте, в котором указан "поиск участников", ввожу строку и получаю список участников, где для каждого участника указан его логин и имя, причём в списке присутствуют только те участники, в логине или имени каждого из которых присутствует вводная строка в качестве подстроки. Также, если не сказано иного, в этом списке я не присутствую.
8. Я, как участник, в том контексте, в котором указан "выбор участников", через поиск участников получаю список участников и выбираю конкретных участников. Также я могу убрать уже выбранных участников. Таким образом, я могу выбрать практически любое множество участников.

## Привычки
### Создание привычки
9. Я, как участник, в стартовом контексте перехожу в контекст создания привычки. Если я выйду из этого контекста до подтверждения создания, то никакие введённые данные в этом контексте не сохранятся.
10. Я, как участник, в контексте создания привычки ввожу название привычки, описание, теги, тип отметок, периодичность отметок, цель привычки. Тип отметок, их периодичность и теги я выбираю из предложенных вариантов.
11. Я, как участник, в контексте создания привычки вижу список шаблонов привычек, где для каждого шаблона указано название привычки, описание, теги, тип отметок, периодичность отметок, цель привычки.
12. Я, как участник, в контексте создания привычки выбираю один из шаблонов привычек и создаю свой экземпляр такой привычки, чтобы потом сравнивать свои результаты этой привычки с общими результатами других пользователей по этому шаблону. Этим же действием я подтверждаю создание и перехожу в контекст этой свежесозданной привычки. Параметры этой привычки равны параметрам шаблона привычки.
13. Я, как участник, в контексте создания привычки выбираю один из шаблонов привычек и копирую её параметры в параметры создаваемой привычки, как если бы я их вводил по одному.
14. Я, как участник, в контексте создания привычки подтверждаю создание с параметрами, которые были введены мною ранее и перехожу в контекст этой свежесозданной привычки. Я могу подтвердить создание, только если корректно введены следующие параметры: название привычки, тип отметок, периодичность отметок, цель привычки.

### Привычка
15. Я, как участник, в стартовом контексте вижу список своих привычек, где для каждой привычки указано название привычки, тип отметок, периодичность отметок, цель привычки.
16. Я, как участник, в стартовом контексте выбираю одну из своих привычек, перехожу в контекст этой привычки.
17. Я, как участник, в контексте привычки вижу название привычки, описание, теги, тип отметок, периодичность отметок, цель привычки, является ли привычка шаблонной и список отметок, где для каждой отметки указан таймстемп, значение и комментарий.
18. Я, как участник, в контексте привычки изменяю название привычки, описание и цель привычки. Нельзя изменить параметры шаблонной привычки.

### Отметки привычки
Список всех таймстемпов привычки - это таймстемпы от момента создания привычки до текущего момента, расположенные с периодичностью, заданной при создании привычки, плюс некоторое количество таймстемпов в будущем, число которых зависит от периодичности. Доступным считается такой таймстемп из этого списка, для которого не существует отметки.

19. Я, как участник, в контексте привычки добавляю отметку к этой привычке, выбрав доступный таймстемп и введя значение и опциональный комментарий. 
20. Я, как участник, в контексте привычки, выбрав конкретную отметку, изменяю её значение, комментарий.

## Группа
### Создание группы
21. Я, как участник, в стартовом контексте перехожу в контекст создания группы. Если я выйду из этого контекста до подтверждения создания, то никакие введённые данные в этом контексте не сохранятся.
22. Я, как участник, в контексте создания группы ввожу её название.
23. Я, как участник, в контексте создания группы через выбор участников выбираю участников, которые после создания группы станут участниками этой группы.
24. Я, как участник, в контексте создания группы подтверждаю её создание с параметрами, которые были введены мною ранее, и перехожу в контекст этой свежесозданной группы и становлюсь участником группы. Я могу подтвердить создание группы, только если я корректно ввёл название.

### Группа
25. Я, как участник, в стартовом контексте вижу список групп, участником которых я явлюсь, причём для каждой группы указано её название.
26. Я, как участник, в стартовом контексте выбираю группу и перехожу в её контекст, становясь участником группы.
27. Я, как участник группы, в контексте группы вижу её название и список участников этой группы.
28. Я, как участник группы, в контексте группы через поиск участников выбираю и добавляю участников, так что они становятся участниками этой группы.
29. Я, как участник группы, в контексте группы выхожу из группы, перестаю быть участником этой группы, становлюсь участником и перехожу в стартовый контекст.

## Групповые привычки
### Создание групповой привычки
30. Я, как участник группы, в контексте группы перехожу в контекст создания групповой привычки. 

Контекст создания групповой привычки аналогичен контексту создания привычки за следующими исключениями:

31. Я, как участник группы, в контексте создания групповой привычки выбираю один из типов групповой привычки: с общим зачётом или с индивидуальным зачётом.

### Групповая привычка
32. Я, как участник группы, в контексте группы вижу список групповых привычек с общим зачётом, где для каждой привычки указано название привычки, тип отметок, периодичность отметок, цель привычки.
33. Я, как участник группы, в контексте группы выбираю групповую привычку с общим зачётом и перехожу в контекст этой групповой привычки с общим зачётом.
34. Я, как участник группы, в контексте группы вижу список групповых привычек с индивидуальным зачётом, где для каждой привычки указано название привычки, тип отметок, периодичность отметок, цель привычки.
35. Я, как участник группы, в контексте группы выбираю групповую привычку с индивидуальным зачётом и перехожу в контекст этой групповой привычки с индивидуальным зачётом.
36. Я, как участник группы, в контексте групповой привычки с общим зачётом вижу название привычки, описание, теги, тип отметок, периодичность отметок, цель привычки, является ли привычка шаблонной и список отметок, где для каждой отметки указан таймстемп, значение и комментарий.
37. Я, как участник группы, в контексте групповой привычки с индивидуальным зачётом вижу название привычки, описание, теги, тип отметок, периодичность отметок, цель привычки, является ли привычка шаблонной и сводную таблицу, где столбцы озаглавлены таймстемпами отметок, строки - именами и логинами участников группы, обладающих соответствующей привычкой для этой групповой привычки с индивидуальным зачётом, а на пересечении соответствующие отметки, где для каждой отметки указано значение и комментарий.
38. Я, как участник группы, в контексте групповой привычки с общим зачётом и в контексте групповой привычки с индивидуальным зачётом изменяю название привычки, описание и цель привычки. 

### Отметки групповой привычки
Аналогично отметкам привычки за следующим исключением:
- В контексте групповой привычки с индивидуальным зачётом отметка выставляется только в той строке сводной таблице, которая соответствует мне и моей привычке.
